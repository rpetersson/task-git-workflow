name: task-git-workflow

on:
push:
    branches: [ branch_name ]
pull_request:
    branches: [ branch_name ]
jobs:

build:
    runs-on: ubuntu-latest
    steps:
    - name: Notify Teams
      run: docker push ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}:$GITHUB_RUN_NUMBER
notify:
    runs-on: ubuntu-latest
    if: always()
    needs: build
    steps:
    - name: Send a Notification
        id: notify
        uses: thechetantalwar/teams-notify@v2
        with:
        teams_webhook_url: "https://teams.microsoft.com/l/channel/19%3a0cd2b646a6be4d7faa004c4fb86db4b0%40thread.tacv2/Test?groupId=1d75ca70-3c5b-408e-87e2-42de95afc0f6&tenantId=e2a7fc76-2989-4d79-a54d-25dec1c562f6"
        message: "Github Action Build Number ${{ github.run_number }} Completed for ${{ github.repository }} and the outcome is  ${{ needs.build.result }}."